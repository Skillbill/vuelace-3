import{r as N,j as f,k as g,y as w,B as b,x as p,A as _,z as v,v as y,u as d,F as A,l as P}from"./vue.esm-bundler-BYZbTIRI.js";import{_ as x,o as E}from"./VLTextArea-DBzmJiQC.js";import{d as F}from"./pinia-BTzaPvzc.js";import{_ as R}from"./ActiveCell-DwQuZy9X.js";import"./api.esm-C3jrVNCq.js";import"./main-CZ2WSQaV.js";const c=[{id:"1",username:"admin",firstName:"Admin",lastName:"Admin",active:!0,role:"admin",age:30,activation_date:new Date,expiration_date:new Date},{id:"2",username:"user",firstName:"User",lastName:"User",active:!0,role:"user",age:25,activation_date:new Date,expiration_date:new Date},{id:"3",username:"guest",firstName:"Guest",lastName:"Guest",role:"guest",active:!1,age:20,activation_date:new Date,expiration_date:new Date}],K=async(n,a,e)=>{let s=[...c];return e&&Object.keys(e).length&&(s=s.filter(r=>Object.keys(e).every(t=>{if(["",null,void 0].includes(e[t]))return!0;switch(typeof e[t]){case"boolean":return r[t]===e[t];case"number":return r[t]===e[t];case"object":return t==="activation_date"?r[t]>e[t]:t==="expiration_date"?r[t]<e[t]:r[t]===e[t];default:return r[t].includes(e[t])}}))),{result:s,page:{totalRows:3,currentPage:n,pageRows:a,totalPages:1}}},$=async n=>c.find(a=>a.id===n),S=async n=>(c.push(n),n),B=async(n,a)=>{const e=c.findIndex(s=>s.id===n);return c[e]=a,a},j=async n=>{const a=c.findIndex(e=>e.id===n);c.splice(a,1)},q=F("users",()=>{const n=N([]);return{users:n,createUser:async o=>{try{await S({...o,id:`${n.value.length+1}`})}catch(i){console.log(i)}},getUser:async o=>{try{return await $(o)}catch(i){console.log(i)}},getUsers:async(o,i,u)=>{try{const l=await K(o,i,u);return{result:[...l.result],page:{currentPage:l.page.currentPage,totalRows:l.page.totalRows,pageRows:l.page.pageRows}}}catch(l){console.log(l)}},updateUser:async(o,i)=>{try{await B(o,i)}catch(u){console.log(u)}},deleteUser:async o=>{try{await j(o)}catch(i){console.log(i)}}}}),D=f({__name:"DateCell",props:{data:{},field:{}},setup(n){return(a,e)=>(g(),w("div",null,b(a.data[a.field]&&`${a.data[a.field].getFullYear()}-${("0"+(a.data[a.field].getMonth()+1)).slice(-2)}-${("0"+a.data[a.field].getDate()).slice(-2)}`),1))}});D.__docgenInfo={exportName:"default",displayName:"DateCell",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}},{name:"field",required:!0,type:{name:"string"}}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/cells/DateCell.vue"]};const O={slot:"label"},L={class:"flex flex-col"},T={class:"flex justify-end w-full gap-2"},I=f({__name:"DeleteDialog",props:{data:{}},emits:["close","cancel","confirm"],setup(n,{emit:a}){const e=a,s=()=>{e("cancel"),t()},r=()=>{e("confirm"),t()},t=()=>{e("close")};return(o,i)=>{var u,l;return g(),w(A,null,[p("div",O,"Delete - "+b((l=(u=o.data)==null?void 0:u.item)==null?void 0:l.username),1),p("div",L,[_(" Do you want to delete the user? "),p("div",T,[v(d(x),{onClick:s},{default:y(()=>[_("Cancel")]),_:1}),v(d(x),{onClick:r},{default:y(()=>[_("Confirm")]),_:1})])])],64)}}});I.__docgenInfo={exportName:"default",displayName:"DeleteDialog",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}}],events:[{name:"close"},{name:"cancel"},{name:"confirm"}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/dialogs/DeleteDialog.vue"]};const C=f({__name:"UsersCrudExample",setup(n){const a=q(),e={id:"users",singular_label:"user",primary_key:"username",filters_title:"filters",headers:[{i18n_key:"Username",sortable:!1,value:"username",columnProps:{class:"w-1/4"}},{i18n_key:"First name",sortable:!1,value:"firstName"},{i18n_key:"Last name",sortable:!1,value:"lastName"},{i18n_key:"Role",sortable:!1,value:"role"},{i18n_key:"Age",sortable:!1,value:"age"},{i18n_key:"Active",sortable:!1,value:"active",type:"boolean",componentProps:{trueColor:"text-success-500"}},{i18n_key:"Activation date",value:"activation_date",sortable:!1,type:"date"},{i18n_key:"Expiration date",value:"expiration_date",sortable:!1,type:"date"}],filters:[{i18n_key:"Username",value:"username",input_type:"text"},{i18n_key:"First name",value:"firstName",input_type:"text"},{i18n_key:"Last name",value:"lastName",input_type:"text"},{i18n_key:"Role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}],default_value:""},{i18n_key:"Activation date",value:"activation_date",input_type:"date"}],form_fields:[{i18n_key:"Username",value:"username",placeholder:"Enter username",required:!0,rules:[{validateFn:s=>!!s,message:"Username is required"},{validateFn:s=>s.length>3,message:"Username must be at least 4 characters long"}],side_effect:(s,r)=>{const{username:t}=s;t==="admin"?(r.role.options=[{value:"admin",text:"admin"}],s.role="admin"):r.role.options=[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},input_type:"text"},{i18n_key:"First name",value:"firstName",input_type:"text"},{i18n_key:"Last name",value:"lastName",side_effect:(s,r)=>{const{lastName:t}=s;r.firstName.disabled=(t==null?void 0:t.length)>0,s.username=t},input_type:"text"},{i18n_key:"Active",value:"active",input_type:"checkbox",default_value:!0},{i18n_key:"Role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},{i18n_key:"Age",value:"age",input_type:"number"},{i18n_key:"Activation date",value:"activation_date",input_type:"date"},{i18n_key:"Expiration date",value:"expiration_date",input_type:"date"}],actions:[{name:"Delete",i18n_key:"Delete",icon_name:"delete",onClick:s=>{console.log("Delete side effect",{...s})},component:I,dialogProperties:{noCloseOnOutsideClick:!1}}]};return(s,r)=>(g(),P(d(E),{id:e.id,singular_label:e.singular_label,primary_key:e.primary_key,headers:e.headers,filters:e.filters,form_fields:e.form_fields,actions:e.actions,getItems:d(a).getUsers,addItem:d(a).createUser,components:{boolean:R,date:D},actionHeaderI18nKey:"Actions",addI18nKey:"Add",applyI18nKey:"Apply",resetI18nKey:"Reset",cancelI18nKey:"Cancel",addButtonI18nKey:"Add user",addTitleI18nKey:"Add user",editTitleI18nKey:"Edit user",editTooltipI18nKey:"Edit"},null,8,["id","singular_label","primary_key","headers","filters","form_fields","actions","getItems","addItem","components"]))}});C.__docgenInfo={exportName:"default",displayName:"UsersCrudExample",description:"",tags:{},sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/UsersCrudExample.vue"]};const J={title:"Examples/Users Crud",component:C,tags:["autodocs"],args:{}},m={};var h,U,k;m.parameters={...m.parameters,docs:{...(h=m.parameters)==null?void 0:h.docs,source:{originalSource:"{}",...(k=(U=m.parameters)==null?void 0:U.docs)==null?void 0:k.source}}};const Q=["Single"];export{m as Single,Q as __namedExportsOrder,J as default};
