import{r as S,j as g,k as y,z as I,C,y as p,B as _,A as x,x as U,u as d,F as E,l as F}from"./vue.esm-bundler-DEjXoRfX.js";import{_ as h,o as L}from"./VLTextArea-BcKZPcMa.js";import{d as R}from"./pinia-ButdaEck.js";import{_ as K}from"./ActiveCell-BgCe4r9C.js";import"./api.esm-D392XNf6.js";import"./main-pC4Q4JB4.js";const c=[{id:"1",username:"admin",firstName:"Admin",lastName:"Admin",active:!0,role:"admin",age:30,activation_date:new Date,expiration_date:new Date},{id:"2",username:"user",firstName:"User",lastName:"User",active:!0,role:"user",age:25,activation_date:new Date,expiration_date:new Date},{id:"3",username:"guest",firstName:"Guest",lastName:"Guest",role:"guest",active:!1,age:20,activation_date:new Date,expiration_date:new Date}],$=async(s,t,e)=>{let n=[...c];return e&&Object.keys(e).length&&(n=n.filter(i=>Object.keys(e).every(a=>{var o,r,u,l;if(["",null,void 0].includes(e[a]))return!0;switch(typeof e[a]){case"boolean":return i[a]===e[a];case"number":return i[a]===e[a];case"object":return a==="activation_date"?((o=i[a])==null?void 0:o.toLocaleDateString())==e[a].toLocaleDateString():a==="expiration_date"?((r=i[a])==null?void 0:r.toLocaleDateString())==e[a].toLocaleDateString():i[a]===e[a];default:return(l=(u=i[a])==null?void 0:u.toLowerCase())==null?void 0:l.includes(e[a].toLowerCase())}}))),{result:n.slice((s-1)*t,s*t),page:{totalRows:n.length,currentPage:s,pageRows:t,totalPages:1}}},B=async s=>c.find(t=>t.id===s),j=async s=>(c.push(s),s),q=async(s,t)=>{const e=c.findIndex(n=>n.id===s);return c[e]=t,t},O=async s=>{const t=c.findIndex(e=>e.id===s);c.splice(t,1)},b=R("users",()=>{const s=S([]);return{users:s,createUser:async o=>{try{await j({...o,id:`${s.value.length+1}`})}catch(r){console.log(r)}},getUser:async o=>{try{return await B(o)}catch(r){console.log(r)}},getUsers:async(o,r,u)=>{try{const l=await $(o,r,u);return{result:[...l.result],page:{currentPage:l.page.currentPage,totalRows:l.page.totalRows,pageRows:l.page.pageRows}}}catch(l){console.log(l)}},updateUser:async o=>{try{await q(o.id,o)}catch(r){console.log(r)}},deleteUser:async o=>{try{await O(o)}catch(r){console.log(r)}}}}),N=g({__name:"DateCell",props:{data:{},field:{}},setup(s){return(t,e)=>(y(),I("div",null,C(t.data[t.field]&&`${t.data[t.field].getFullYear()}-${("0"+(t.data[t.field].getMonth()+1)).slice(-2)}-${("0"+t.data[t.field].getDate()).slice(-2)}`),1))}});N.__docgenInfo={exportName:"default",displayName:"DateCell",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}},{name:"field",required:!0,type:{name:"string"}}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/cells/DateCell.vue"]};const T={slot:"label"},V={class:"flex flex-col"},G={class:"flex justify-end w-full gap-2"},A=g({__name:"DeleteDialog",props:{data:{}},emits:["close","cancel","confirm"],setup(s,{emit:t}){const e=t,n=b(),i=s,a=()=>{e("cancel"),r()},o=async()=>{await n.deleteUser(i.data.item[i.data.primary_key]),e("confirm"),r()},r=()=>{e("close")};return(u,l)=>{var f,v;return y(),I(E,null,[p("div",T,"Delete - "+C((v=(f=u.data)==null?void 0:f.item)==null?void 0:v.username),1),p("div",V,[_(" Do you want to delete the user? "),p("div",G,[x(d(h),{onClick:a},{default:U(()=>[_("Cancel")]),_:1}),x(d(h),{onClick:o},{default:U(()=>[_("Confirm")]),_:1})])])],64)}}});A.__docgenInfo={exportName:"default",displayName:"DeleteDialog",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}}],events:[{name:"close"},{name:"cancel"},{name:"confirm"}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/dialogs/DeleteDialog.vue"]};const P=g({__name:"UsersCrudExample",setup(s){const t=b(),e={id:"users",singular_label:"user",primary_key:"id",filters_title:"filters",headers:[{i18n_key:"Username",sortable:!1,value:"username",columnProps:{class:"w-1/4"}},{i18n_key:"First name",sortable:!1,value:"firstName"},{i18n_key:"Last name",sortable:!1,value:"lastName"},{i18n_key:"Role",sortable:!1,value:"role"},{i18n_key:"Age",sortable:!1,value:"age"},{i18n_key:"Active",sortable:!1,value:"active",type:"boolean",componentProps:{trueColor:"text-success-500"}},{i18n_key:"Activation date",value:"activation_date",sortable:!1,type:"date"},{i18n_key:"Expiration date",value:"expiration_date",sortable:!1,type:"date"}],filters:[{i18n_key:"Username",value:"username",input_type:"text"},{i18n_key:"First name",value:"firstName",input_type:"text"},{i18n_key:"Last name",value:"lastName",input_type:"text"},{i18n_key:"Role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}],default_value:""},{i18n_key:"Activation date",value:"activation_date",input_type:"date"}],form_fields:[{i18n_key:"Username",value:"username",placeholder:"Enter username",required:!0,rules:[{validateFn:n=>!!n,message:"Username is required"},{validateFn:n=>n.length>3,message:"Username must be at least 4 characters long"}],side_effect:(n,i)=>{const{username:a}=n;a==="admin"?(i.role.options=[{value:"admin",text:"admin"}],n.role="admin"):i.role.options=[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},input_type:"text"},{i18n_key:"First name",value:"firstName",input_type:"text"},{i18n_key:"Last name",value:"lastName",input_type:"text"},{i18n_key:"Active",value:"active",input_type:"checkbox",default_value:!0},{i18n_key:"Role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},{i18n_key:"Age",value:"age",input_type:"number"},{i18n_key:"Activation date",value:"activation_date",input_type:"date"},{i18n_key:"Expiration date",value:"expiration_date",input_type:"date"}],actions:[{name:"Delete",i18n_key:"Delete",icon_name:"delete",onClick:n=>{console.log("Delete side effect",{...n})},component:A,dialogProperties:{noCloseOnOutsideClick:!1}}]};return(n,i)=>(y(),F(d(L),{id:e.id,singular_label:e.singular_label,primary_key:e.primary_key,headers:e.headers,filters:e.filters,form_fields:e.form_fields,actions:e.actions,getItems:d(t).getUsers,addItem:d(t).createUser,editItem:d(t).updateUser,components:{boolean:K,date:N},actionHeaderI18nKey:"Actions",addI18nKey:"Add",applyI18nKey:"Apply",resetI18nKey:"Reset",cancelI18nKey:"Cancel",addButtonI18nKey:"Add user",addTitleI18nKey:"Add user",editTitleI18nKey:"Edit user",editTooltipI18nKey:"Edit"},null,8,["id","singular_label","primary_key","headers","filters","form_fields","actions","getItems","addItem","editItem","components"]))}});P.__docgenInfo={exportName:"default",displayName:"UsersCrudExample",description:"",tags:{},sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/UsersCrudExample.vue"]};const W={title:"Examples/Users Crud",component:P,tags:["autodocs"],args:{}},m={};var D,k,w;m.parameters={...m.parameters,docs:{...(D=m.parameters)==null?void 0:D.docs,source:{originalSource:"{}",...(w=(k=m.parameters)==null?void 0:k.docs)==null?void 0:w.source}}};const X=["Single"];export{m as Single,X as __namedExportsOrder,W as default};
