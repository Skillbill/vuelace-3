import{r as I,j as f,k as g,y as w,B as b,x as p,A as _,z as v,v as y,u as d,F as P,l as A}from"./vue.esm-bundler-BYZbTIRI.js";import{_ as h,o as F}from"./VLTextArea-CsHrRkfe.js";import{d as $}from"./pinia-BTzaPvzc.js";import{_ as E}from"./ActiveCell-BJ4pdCa9.js";import"./api.esm-C3jrVNCq.js";import"./main-CZ2WSQaV.js";const u=[{id:"1",username:"admin",firstName:"Admin",lastName:"Admin",active:!0,role:"admin",age:30,activation_date:new Date,expiration_date:new Date},{id:"2",username:"user",firstName:"User",lastName:"User",active:!0,role:"user",age:25,activation_date:new Date,expiration_date:new Date},{id:"3",username:"guest",firstName:"Guest",lastName:"Guest",role:"guest",active:!1,age:20,activation_date:new Date,expiration_date:new Date}],S=async(r,t,e)=>{let s=[...u];return e&&Object.keys(e).length&&(s=s.filter(n=>Object.keys(e).every(a=>{if(["",null,void 0].includes(e[a]))return!0;switch(typeof e[a]){case"boolean":return n[a]===e[a];case"number":return n[a]===e[a];case"object":return a==="activation_date"?n[a]>e[a]:a==="expiration_date"?n[a]<e[a]:n[a]===e[a];default:return n[a].includes(e[a])}}))),{result:s,page:{totalRows:3,currentPage:r,pageRows:t,totalPages:1}}},R=async r=>u.find(t=>t.id===r),j=async r=>(u.push(r),r),q=async(r,t)=>{const e=u.findIndex(s=>s.id===r);return u[e]=t,t},B=async r=>{const t=u.findIndex(e=>e.id===r);u.splice(t,1)},O=$("users",()=>{const r=I([]);return{users:r,createUser:async o=>{try{await j({...o,id:`${r.value.length+1}`})}catch(l){console.log(l)}},getUser:async o=>{try{return await R(o)}catch(l){console.log(l)}},getUsers:async(o,l,c)=>{try{const i=await S(o,l,c);return{result:[...i.result],page:{currentPage:i.page.currentPage,totalRows:i.page.totalRows,pageRows:i.page.pageRows}}}catch(i){console.log(i)}},updateUser:async(o,l)=>{try{await q(o,l)}catch(c){console.log(c)}},deleteUser:async o=>{try{await B(o)}catch(l){console.log(l)}}}}),D=f({__name:"DateCell",props:{data:{},field:{}},setup(r){return(t,e)=>(g(),w("div",null,b(t.data[t.field]&&`${t.data[t.field].getFullYear()}-${("0"+(t.data[t.field].getMonth()+1)).slice(-2)}-${("0"+t.data[t.field].getDate()).slice(-2)}`),1))}});D.__docgenInfo={exportName:"default",displayName:"DateCell",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}},{name:"field",required:!0,type:{name:"string"}}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/cells/DateCell.vue"]};const V={slot:"label"},G={class:"flex flex-col"},z={class:"flex justify-end w-full gap-2"},N=f({__name:"DeleteDialog",props:{data:{}},emits:["close","cancel","confirm"],setup(r,{emit:t}){const e=t,s=()=>{e("cancel"),a()},n=()=>{e("confirm"),a()},a=()=>{e("close")};return(o,l)=>{var c,i;return g(),w(P,null,[p("div",V,"Delete - "+b((i=(c=o.data)==null?void 0:c.item)==null?void 0:i.username),1),p("div",G,[_(" Do you want to delete the user? "),p("div",z,[v(d(h),{onClick:s},{default:y(()=>[_("Cancel")]),_:1}),v(d(h),{onClick:n},{default:y(()=>[_("Confirm")]),_:1})])])],64)}}});N.__docgenInfo={exportName:"default",displayName:"DeleteDialog",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}}],events:[{name:"close"},{name:"cancel"},{name:"confirm"}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/dialogs/DeleteDialog.vue"]};const C=f({__name:"UsersCrudExample",setup(r){const t=O(),e={id:"users",singular_label:"user",primary_key:"username",filters_title:"filters",headers:[{i18n_key:"header.username",sortable:!1,value:"username",columnProps:{class:"w-1/4"}},{i18n_key:"header.firstname",sortable:!1,value:"firstName"},{i18n_key:"header.lastname",sortable:!1,value:"lastName"},{i18n_key:"header.role",sortable:!1,value:"role"},{i18n_key:"header.age",sortable:!1,value:"age"},{i18n_key:"header.active",sortable:!1,value:"active",type:"boolean",componentProps:{trueColor:"text-success-500"}},{i18n_key:"header.activation_date",value:"activation_date",sortable:!1,type:"date"},{i18n_key:"header.expiration_date",value:"expiration_date",sortable:!1,type:"date"}],filters:[{i18n_key:"header.username",value:"username",input_type:"text"},{i18n_key:"header.firstname",value:"firstName",input_type:"text"},{i18n_key:"header.lastname",value:"lastName",input_type:"text"},{i18n_key:"header.role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}],default_value:""},{i18n_key:"header.activation_date",value:"activation_date",input_type:"date"}],form_fields:[{i18n_key:"header.username",value:"username",placeholder:"Enter username",required:!0,rules:[{validateFn:s=>!!s,message:"Username is required"},{validateFn:s=>s.length>3,message:"Username must be at least 4 characters long"}],side_effect:(s,n)=>{const{username:a}=s;a==="admin"?(n.role.options=[{value:"admin",text:"admin"}],s.role="admin"):n.role.options=[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},input_type:"text"},{i18n_key:"header.firstname",value:"firstName",input_type:"text"},{i18n_key:"header.lastname",value:"lastName",side_effect:(s,n)=>{const{lastName:a}=s;n.firstName.disabled=(a==null?void 0:a.length)>0,s.username=a},input_type:"text"},{i18n_key:"header.active",value:"active",input_type:"checkbox",default_value:!0},{i18n_key:"header.role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},{i18n_key:"header.age",value:"age",input_type:"number"},{i18n_key:"header.activation_date",value:"activation_date",input_type:"date"},{i18n_key:"header.expiration_date",value:"expiration_date",input_type:"date"}],actions:[{name:"Delete",i18n_key:"tooltip.delete",icon_name:"delete",onClick:s=>{console.log("Delete side effect",{...s})},component:N,dialogProperties:{noCloseOnOutsideClick:!1}}]};return(s,n)=>(g(),A(d(F),{id:e.id,singular_label:e.singular_label,primary_key:e.primary_key,headers:e.headers,filters:e.filters,form_fields:e.form_fields,actions:e.actions,getItems:d(t).getUsers,addItem:d(t).createUser,components:{boolean:E,date:D}},null,8,["id","singular_label","primary_key","headers","filters","form_fields","actions","getItems","addItem","components"]))}});C.__docgenInfo={exportName:"default",displayName:"UsersCrudExample",description:"",tags:{},sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/UsersCrudExample.vue"]};const K={title:"Examples/Users Crud",component:C,tags:["autodocs"],args:{}},m={};var x,U,k;m.parameters={...m.parameters,docs:{...(x=m.parameters)==null?void 0:x.docs,source:{originalSource:"{}",...(k=(U=m.parameters)==null?void 0:U.docs)==null?void 0:k.source}}};const Q=["Single"];export{m as Single,Q as __namedExportsOrder,K as default};
