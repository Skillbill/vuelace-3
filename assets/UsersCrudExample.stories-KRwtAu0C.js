import{r as P,j as g,k as v,z as k,C as I,y as p,B as _,A as x,x as h,u as d,F as S,l as E}from"./vue.esm-bundler-B0YmCfnK.js";import{_ as w,p as F}from"./VLRadioGroup-bghozsU6.js";import{d as R}from"./pinia-C0DfPC8J.js";import{a as K}from"./main-0nZsO_Ys.js";import{_ as $}from"./ActiveCell-DEL5N_St.js";import"./api.esm-D392XNf6.js";const c=[{id:"1",username:"admin",firstName:"Admin",lastName:"Admin",active:!0,role:"admin",age:30,activation_date:new Date,expiration_date:new Date},{id:"2",username:"user",firstName:"User",lastName:"User",active:!0,role:"user",age:25,activation_date:new Date,expiration_date:new Date},{id:"3",username:"guest",firstName:"Guest",lastName:"Guest",role:"guest",active:!1,age:20,activation_date:new Date,expiration_date:new Date}],B=async(s,t,e)=>{let n=[...c];return e&&Object.keys(e).length&&(n=n.filter(i=>Object.keys(e).every(a=>{var o,r,u,l;if(["",null,void 0].includes(e[a]))return!0;switch(typeof e[a]){case"boolean":return i[a]===e[a];case"number":return i[a]===e[a];case"object":return a==="activation_date"?((o=i[a])==null?void 0:o.toLocaleDateString())==e[a].toLocaleDateString():a==="expiration_date"?((r=i[a])==null?void 0:r.toLocaleDateString())==e[a].toLocaleDateString():i[a]===e[a];default:return(l=(u=i[a])==null?void 0:u.toLowerCase())==null?void 0:l.includes(e[a].toLowerCase())}}))),{result:n.slice((s-1)*t,s*t),page:{totalRows:n.length,currentPage:s,pageRows:t,totalPages:1}}},V=async s=>c.find(t=>t.id===s),j=async s=>(c.push(s),s),q=async(s,t)=>{const e=c.findIndex(n=>n.id===s);return c[e]=t,t},O=async s=>{const t=c.findIndex(e=>e.id===s);c.splice(t,1)},C=R("users",()=>{const s=P([]);return{users:s,createUser:async o=>{try{await j({...o,id:`${s.value.length+1}`})}catch(r){console.log(r)}},getUser:async o=>{try{return await V(o)}catch(r){console.log(r)}},getUsers:async(o,r,u)=>{try{const l=await B(o,r,u);return{result:[...l.result],page:{currentPage:l.page.currentPage,totalRows:l.page.totalRows,pageRows:l.page.pageRows}}}catch(l){console.log(l)}},updateUser:async o=>{try{await q(o.id,o)}catch(r){console.log(r)}},deleteUser:async o=>{try{await O(o)}catch(r){console.log(r)}}}}),M="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='mdi-ghost'%20viewBox='0%200%2024%2024'%3e%3cpath%20d='M12,2A9,9%200%200,0%203,11V22L6,19L9,22L12,19L15,22L18,19L21,22V11A9,9%200%200,0%2012,2M9,8A2,2%200%200,1%2011,10A2,2%200%200,1%209,12A2,2%200%200,1%207,10A2,2%200%200,1%209,8M15,8A2,2%200%200,1%2017,10A2,2%200%200,1%2015,12A2,2%200%200,1%2013,10A2,2%200%200,1%2015,8Z'%20/%3e%3c/svg%3e",b=g({__name:"DateCell",props:{data:{},field:{}},setup(s){return(t,e)=>(v(),k("div",null,I(t.data[t.field]&&`${t.data[t.field].getFullYear()}-${("0"+(t.data[t.field].getMonth()+1)).slice(-2)}-${("0"+t.data[t.field].getDate()).slice(-2)}`),1))}});b.__docgenInfo={exportName:"default",displayName:"DateCell",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}},{name:"field",required:!0,type:{name:"string"}}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/cells/DateCell.vue"]};const T={slot:"label"},G={class:"flex flex-col"},z={class:"flex justify-end w-full gap-2"},N=g({__name:"DeleteDialog",props:{data:{}},emits:["close","cancel","confirm"],setup(s,{emit:t}){const e=t,n=C(),i=s,a=()=>{e("cancel"),r()},o=async()=>{await n.deleteUser(i.data.item[i.data.primary_key]),e("confirm"),r()},r=()=>{e("close")};return(u,l)=>{var y,f;return v(),k(S,null,[p("div",T,"Delete - "+I((f=(y=u.data)==null?void 0:y.item)==null?void 0:f.username),1),p("div",G,[_(" Do you want to delete the user? "),p("div",z,[x(d(w),{onClick:a},{default:h(()=>[_("Cancel")]),_:1}),x(d(w),{onClick:o},{default:h(()=>[_("Confirm")]),_:1})])])],64)}}});N.__docgenInfo={exportName:"default",displayName:"DeleteDialog",description:"",tags:{},props:[{name:"data",required:!0,type:{name:"any"}}],events:[{name:"close"},{name:"cancel"},{name:"confirm"}],sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/dialogs/DeleteDialog.vue"]};const L=g({__name:"UsersCrudExample",setup(s){K("ghost",M);const t=C(),e={id:"users",singular_label:"user",primary_key:"id",filters_title:"filters",headers:[{i18n_key:"Username",sortable:!1,value:"username",columnProps:{class:"w-1/4"}},{i18n_key:"First name",sortable:!1,value:"firstName"},{i18n_key:"Last name",sortable:!1,value:"lastName"},{i18n_key:"Role",sortable:!1,value:"role"},{i18n_key:"Age",sortable:!1,value:"age"},{i18n_key:"Active",sortable:!1,value:"active",type:"boolean",componentProps:{trueColor:"text-success-500"}},{i18n_key:"Activation date",value:"activation_date",sortable:!1,type:"date"},{i18n_key:"Expiration date",value:"expiration_date",sortable:!1,type:"date"},{i18n_key:"Description",value:"description"}],filters:[{i18n_key:"Username",value:"username",input_type:"text"},{i18n_key:"First name",value:"firstName",input_type:"text"},{i18n_key:"Last name",value:"lastName",input_type:"text"},{i18n_key:"Role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest",icon:"ghost"}],default_value:""},{i18n_key:"Activation date",value:"activation_date",input_type:"date"}],form_fields:[{i18n_key:"Username",value:"username",placeholder:"Enter username",required:!0,rules:[{validateFn:n=>!!n,message:"Username is required"},{validateFn:n=>n.length>3,message:"Username must be at least 4 characters long"}],side_effect:(n,i)=>{const{username:a}=n;a==="admin"?(i.role.options=[{value:"admin",text:"admin"}],n.role="admin"):i.role.options=[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},input_type:"text"},{i18n_key:"First name",value:"firstName",input_type:"text"},{i18n_key:"Last name",value:"lastName",input_type:"text"},{i18n_key:"Active",value:"active",input_type:"checkbox",default_value:!0},{i18n_key:"Role",value:"role",input_type:"select",options:[{value:"",text:""},{value:"admin",text:"admin"},{value:"user",text:"user"},{value:"guest",text:"guest"}]},{i18n_key:"Age",value:"age",input_type:"number"},{i18n_key:"Activation date",value:"activation_date",input_type:"date"},{i18n_key:"Expiration date",value:"expiration_date",input_type:"date"},{i18n_key:"Description",value:"description",input_type:"textarea"}],actions:[{name:"Delete",i18n_key:"Delete",icon_name:"delete",onClick:n=>{console.log("Delete side effect",{...n})},component:N,dialogProperties:{noCloseOnOutsideClick:!1}}]};return(n,i)=>(v(),E(d(F),{id:e.id,singular_label:e.singular_label,primary_key:e.primary_key,headers:e.headers,filters:e.filters,form_fields:e.form_fields,actions:e.actions,getItems:d(t).getUsers,addItem:d(t).createUser,editItem:d(t).updateUser,components:{boolean:$,date:b},actionHeaderI18nKey:"Actions",addI18nKey:"Add",applyI18nKey:"Apply",resetI18nKey:"Reset",cancelI18nKey:"Cancel",addButtonI18nKey:"Add user",addTitleI18nKey:"Add user",editTitleI18nKey:"Edit user",editTooltipI18nKey:"Edit"},null,8,["id","singular_label","primary_key","headers","filters","form_fields","actions","getItems","addItem","editItem","components"]))}});L.__docgenInfo={exportName:"default",displayName:"UsersCrudExample",description:"",tags:{},sourceFiles:["/home/runner/work/vuelace-3/vuelace-3/src/components/examples/UsersCrudExample.vue"]};const X={title:"Examples/Users Crud",component:L,tags:["autodocs"],args:{}},m={};var U,A,D;m.parameters={...m.parameters,docs:{...(U=m.parameters)==null?void 0:U.docs,source:{originalSource:"{}",...(D=(A=m.parameters)==null?void 0:A.docs)==null?void 0:D.source}}};const ee=["Single"];export{m as Single,ee as __namedExportsOrder,X as default};
